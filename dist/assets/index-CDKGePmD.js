(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();let g=document.querySelector("#inputBox"),_=document.querySelector("#submitButton");_.addEventListener("click",e=>{e.preventDefault(),document.querySelector("main").innerHTML="",v()});function v(){if(g.value!="")N(g.value);else{console.log("test");let t=new Date().getHours();console.log(t)}}async function N(e){try{let o=await(await fetch("https://us1.locationiq.com/v1/search?key=pk.bf7be254176f5f8daa0b5262992b2793&q="+e+"%20&format=json")).json(),r=o[0].lat,n=o[0].lon;S(r,n,e)}catch(t){console.log(t)}}async function T(e,t){try{let r=await(await fetch("https://api.unsplash.com/search/photos?client_id=0rzAxVwUjzKGIYfQag6cj_NJKM5Qz51wO9n5E-IZ_xs&query="+t)).json();e.src=r.results[0].urls.raw}catch(o){console.log(o)}}async function S(e,t,o){try{let n=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude="+e+"&longitude="+t+"&current=temperature_2m,wind_speed_10m,weather_code&hourly=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code")).json(),a=document.createElement("div");a.className="realTimeWeather",document.querySelector("main").appendChild(a),m(n.current.weather_code,a);let i=document.createElement("img");T(i,o),document.querySelector(".realTimeWeather").prepend(i);let s=document.createElement("h2"),u=document.createTextNode(o);s.appendChild(u),document.querySelector(".realTimeWeather").prepend(s);let p=document.createElement("p"),d=document.createTextNode(Math.round(n.current.temperature_2m)+"°C");p.appendChild(d),document.querySelector(".realTimeWeather").appendChild(p),q(n),x(n)}catch(r){console.log(r)}}function m(e,t){e<1?l("clear","Clear",t):e<3?l("partly_cloudy","Partly cloudy",t):e<9?l("cloudy","Cloudy",t):e<14?l("foggy","Foggy",t):e<20?l("windy","Windy",t):e<22?l("rainy","Rainy",t):e<25?l("snowy","Snowy",t):e<26?l("heavy_rain","Heavy rain",t):e<28?l("heavy_snow","Heavy snow",t):e<29?l("foggy","Foggy",t):e<30?l("thunderstorm","Thunderstorm",t):e>39&&e<50?l("foggy","Foggy",t):e>49&&e<56?l("partly_cloudy","Partly cloudy",t):e>55&&e<70?l("rainy","Rainy",t):e>69&&e<77?l("snowy","Snowy",t):e>76&&e<80?l("snow_grains","Snow grains",t):e>79&&e<85?l("heavy_rain","Heavy rain",t):e>84&&e<91?l("heavy_snow","Heavy snow",t):e>90&&e<93?l("rainy","Rain",t):e>92&&e<95?l("snowy","Snowy",t):e>94&&e<100?l("thunderstorm","Thunderstorm",t):l("partly_cloudy","Partly cloudy",t)}function l(e,t,o){let r=document.createElement("h3"),n=document.createTextNode(t);r.appendChild(n),o.appendChild(r);let a=document.createElement("img");a.src="resources/"+e+".svg",a.className="weatherIcons",o.appendChild(a)}function q(e){let t=document.createElement("div"),o=document.createElement("span"),r=document.createElement("span"),n=document.createElement("span"),a=document.createElement("h2"),i=document.createTextNode("Today's forecast");a.appendChild(i),document.querySelector("main").appendChild(a),document.querySelector("main").appendChild(t),t.appendChild(o),t.appendChild(r),t.appendChild(n),t.className="todayWeather";let s=document.createElement("h2"),u=document.createTextNode("6h");s.appendChild(u),o.appendChild(s);let p=e.hourly.weather_code[6];m(p,o),h(e,o,6);let d=document.createElement("h2"),c=document.createTextNode("12h");d.appendChild(c),r.appendChild(d);let C=e.hourly.weather_code[12];m(C,r),h(e,r,12);let f=document.createElement("h2"),w=document.createTextNode("18h");f.appendChild(w),n.appendChild(f);let E=e.hourly.weather_code[18];m(E,n),h(e,n,18)}function h(e,t,o){let r=document.createElement("p"),n=document.createTextNode(Math.round(e.hourly.temperature_2m[o])+"°C");r.appendChild(n),t.appendChild(r)}function x(e){let t=document.createElement("div");t.className="weekForecast";let o=document.createElement("span");o.className="weekForecastDay";let r=document.createElement("span");r.className="weekForecastDay";let n=document.createElement("span");n.className="weekForecastDay";let a=document.createElement("span");a.className="weekForecastDay";let i=document.createElement("span");i.className="weekForecastDay";let s=document.createElement("h2"),u=document.createTextNode("Week's forecast");s.appendChild(u),document.querySelector("main").appendChild(s),document.querySelector("main").appendChild(t),t.appendChild(o),t.appendChild(r),t.appendChild(n),t.appendChild(a),t.appendChild(i);let d=new Date().getDay(),c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];y(c[(d+1)%7],o,e,12+24*1),y(c[(d+2)%7],r,e,12+24*2),y(c[(d+3)%7],n,e,12+24*3),y(c[(d+4)%7],a,e,12+24*4),y(c[(d+5)%7],i,e,12+24*5)}function y(e,t,o,r){let n=document.createElement("h2"),a=document.createTextNode(e);n.appendChild(a),t.appendChild(n);let i=o.hourly.weather_code[r];m(i,t),h(o,t,r)}
